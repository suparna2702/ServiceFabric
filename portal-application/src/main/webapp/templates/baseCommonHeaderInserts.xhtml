<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:sec="http://www.springframework.org/security/tags"
	xmlns:p="http://primefaces.org/ui">

	<h:head>
		<f:facet name="first">
			<meta http-equiv="X-UA-Compatible" content="EmulateIE8" />
			<meta content='text/html; charset=UTF-8' http-equiv="Content-Type" />
			<title><ui:insert name="title"></ui:insert></title>
		</f:facet>

		<!-- Google Analytic Tracking Code -->
		<ui:include src="googleAnalyticInclude.xhtml" /> 

		<!-- deprecated -->
		<link type="text/css" rel="stylesheet"
			href="#{root}/resources/css/deprecated/jfr/theme.css" />
		<link type="text/css" rel="stylesheet"
			href="#{root}/resources/css/deprecated/jfr/buttonIcon.css" />
		<link type="text/css" rel="stylesheet"
			href="#{root}/resources/css/deprecated/jfr/primefaces.css" />
		<link type="text/css" rel="stylesheet"
			href="#{root}/resources/css/deprecated/jfr/watermark.css" />
		<link type="text/css" rel="stylesheet"
			href="#{root}/resources/css/deprecated/jfr/galleria.css" />
		<link type="text/css" rel="stylesheet"
			href="#{root}/resources/css/deprecated/jfr/fileupload.css" />

		<link type="text/css" rel="stylesheet"
			href="#{root}/resources/css/deprecated/jfr/contactPanel.css" />
		<link type="text/css" rel="stylesheet"
			href="#{root}/resources/css/deprecated/jfr/editor.css" />
		<link type="text/css" rel="stylesheet"
			href="#{root}/resources/css/deprecated/jfr/keyboard.css" />

		<link type="text/css" rel="stylesheet"
			href="#{root}/resources/css/deprecated/bootstrap.min.css" />
		<link type="text/css" rel="stylesheet"
			href="#{root}/resources/css/deprecated/style.css" />
		<link type="text/css" rel="stylesheet"
			href="#{root}/resources/css/deprecated/similanthemes.css" />

		<!-- new -->
		<link type="text/css" rel="stylesheet"
			href="#{root}/resources/css/bootstrap.css" />
		<link type="text/css" rel="stylesheet"
			href="#{root}/resources/css/bootstrap-responsive.css" />
		<link type="text/css" rel="stylesheet"
			href="#{root}/resources/css/flat-ui.css" />
		<link type="text/css" rel="stylesheet"
			href="#{root}/resources/css/business-reach.css" />

		<!-- Icon library  -->
		<link
			href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css"
			rel="stylesheet" />

		<!-- Bootsnipp CSS -->
		<link type="text/css" rel="stylesheet"
			href="#{root}/resources/css/bootsnipp.css" />

		<!-- Timeline -->
		<link type="text/css" rel="stylesheet"
			href="#{root}/resources/css/timeline/calendar.css" />

		<script src="http://maps.google.com/maps/api/js?sensor=true"
			type="text/javascript"></script>
		<script src="#{root}/resources/js/gmap.js" type="text/javascript"></script>
		<script src="#{root}/resources/js/toolbar.js" type="text/javascript" />
		<script src="#{root}/resources/js/jquery.tabSlideOut.v1.4.1.js"
			type="text/javascript" />

		<script src="#{root}/resources/js/bootstrap.min.js"
			type="text/javascript" />
		<script src="#{root}/resources/js/flatUI/flatui-checkbox.js"
			type="text/javascript" />

		<!--  JS for Tabs etc. -->
		<script src="#{root}/resources/js/flatUI/flatui-radio.js"
			type="text/javascript" />
		<script src="#{root}/resources/js/flatUI/jquery.tagsinput.js"
			type="text/javascript" />
		<script src="#{root}/resources/js/flatUI/jquery.placeholder.js"
			type="text/javascript" />
		<script src="#{root}/resources/js/flatUI/jquery.stacktable.js"
			type="text/javascript" />
		<script src="#{root}/resources/js/flatUI/bootstrap-select.js"
			type="text/javascript" />
		<script src="#{root}/resources/js/flatUI/bootstrap-switch.js"
			type="text/javascript" />
		<script src="#{root}/resources/js/flatUI/bootsnipp.js"
			type="text/javascript" />

		<!-- Timeline -->
		<script src="#{root}/resources/js/underscore-min.js"
			type="text/javascript" />
		<script src="#{root}/resources/js/timeline/calendar.js"
			type="text/javascript" />
		<script src="#{root}/resources/js/timeline/timeline.js"
			type="text/javascript" />

		<!-- Timeline -->
		<script src="#{root}/resources/js/isotope/isotope-docs.js"
			type="text/javascript" />
		<script src="#{root}/resources/js/isotope/controller.js"
			type="text/javascript" />
		<script src="#{root}/resources/js/isotope/index.js"
			type="text/javascript" />

		<script src="#{root}/resources/js/utils.js" type="text/javascript" />

		<script type="text/javascript">
			//<![CDATA[
			// some hacks until we can get rid of primefaces/jsf
			function removejscssfile(filename, filetype) {
				var targetelement = (filetype == "js") ? "script"
						: (filetype == "css") ? "link" : "none" //determine element type to create nodelist from
				var targetattr = (filetype == "js") ? "src"
						: (filetype == "css") ? "href" : "none" //determine corresponding attribute to test for
				var allsuspects = document.getElementsByTagName(targetelement)
				for (var i = allsuspects.length; i >= 0; i--) { //search backwards within nodelist for matching elements to remove
					if (allsuspects[i]
							&& allsuspects[i].getAttribute(targetattr) != null
							&& allsuspects[i].getAttribute(targetattr).indexOf(
									filename) != -1)
						allsuspects[i].parentNode.removeChild(allsuspects[i]) //remove element by calling parentNode.removeChild()
				}
			}

			removejscssfile("primefaces.css.xhtml", "css");
			removejscssfile("buttonIcon.css.xhtml", "css");
			removejscssfile("contactPanel.css.xhtml", "css");
			removejscssfile("editor.css.xhtml", "css");
			removejscssfile("fileupload.css.xhtml", "css");
			removejscssfile("keyboard.css.xhtml", "css");
			removejscssfile("primefaces.css.xhtml", "css");
			removejscssfile("theme.css.xhtml", "css");
			removejscssfile("watermark.css.xhtml", "css");

			function unwrapOldContent() {
				$(
						"#timeoutSession, .ui-tooltip, .ui-selectonemenu-panel, .ui-password-panel, .ui-menu-dynamic")
						.unwrap();
			}
			function wrapOldContent() {
				$(
						"#timeoutSession, .ui-tooltip, .ui-selectonemenu-panel, .ui-password-panel, .ui-menu-dynamic")
						.wrapAll(
								"<div class='old-content' style='position: absolute; left:0px; top: 0px;'/>");
			}
			function fixOldContent() {
				$(".ui-selectonemenu-label").each(
						function() {
							var label = this;
							var labelId = label.id;
							var id = labelId.substring(0, labelId.length
									- "_label".length);
							var panelId = id.replace(/:/g, "\\:") + "_panel";
							var panel = $("#" + panelId);
							panel.width($(label).width() + 16);
						});
			}
			$(document).ready(function() {
				setTimeout(function() {
					wrapOldContent();
					fixOldContent();
				}, 1);
			});
			PrimeFaces.ajax.AjaxUtils.updateElement_original = PrimeFaces.ajax.AjaxUtils.updateElement;
			PrimeFaces.ajax.AjaxUtils.updateElement = function(a, b) {
				unwrapOldContent();
				PrimeFaces.ajax.AjaxUtils.updateElement_original.call(this, a,
						b)
				wrapOldContent();
				fixOldContent();
			}
			//]]>
		</script>
		<ui:insert name="head"></ui:insert>
	</h:head>

</ui:composition>